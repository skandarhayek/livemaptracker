<!DOCTYPE html>
<html>
<head>
  <title>CDT Live Tracker</title>
  <meta charset="utf-8" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <style>
    #map { height: 100vh; width: 100vw; }
  </style>
</head>
<body>
<div id="map"></div>

<!-- Leaflet core -->
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<!-- Leaflet plugin to load KML/GPX/GeoJSON -->
<script src="https://unpkg.com/leaflet-omnivore/leaflet-omnivore.min.js"></script>

<script>
  // Initialize map
  const map = L.map('map').setView([39, -106.5], 6); // Central Rockies

  // OpenStreetMap base layer
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; OpenStreetMap contributors'
  }).addTo(map);

  // --- LIVE MapShare feed (replace with actual username) ---
  const mapshareUrl = 'https://share.garmin.com/Feed/Share/HerUsername'; // ‚Üê change this

  const liveTrack = omnivore.kml(mapshareUrl)
    .on('ready', function () {
      map.fitBounds(liveTrack.getBounds());

      // Highlight breadcrumb trail lines
      liveTrack.eachLayer(function(layer) {
        if (layer instanceof L.Polyline) {
          layer.setStyle({
            color: 'blue',
            weight: 3,
            opacity: 0.8
          });
        }
      });
    })
    .addTo(map);

  // Optional: CDT trail from local file (same directory)
  omnivore.kml('feed.kml', null, L.geoJson(null, {
    style: {
      color: 'green',
      weight: 2,
      opacity: 0.9
    }
  })).addTo(map);
</script>
</body>
</html>
